/*!
* OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
*/
sap.ui.define(["./library","./SliderUtilities","./SliderTooltipBase","sap/ui/core/Control","sap/ui/core/library","./delegate/ValueStateMessage","./SliderTooltipRenderer"],function(e,t,a,o,i,l,r){"use strict";var s=i.ValueState;var u=a.extend("sap.m.SliderTooltip",{metadata:{library:"sap.m",properties:{value:{type:"float",group:"Data",defaultValue:0,bindable:"bindable"},min:{type:"float",group:"Data",defaultValue:0},max:{type:"float",group:"Data",defaultValue:100},editable:{type:"boolean",defaultValue:false},step:{type:"float",group:"Data",defaultValue:1},valueState:{type:"sap.ui.core.ValueState",group:"Appearance",defaultValue:s.None},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:null}},associations:{ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},events:{change:{parameters:{value:{type:"float"}}}}}});u.prototype.init=function(){this._oValueStateMessage=new l(this);this._fLastValidValue=0};u.prototype.getValueStateText=function(){return""};u.prototype.getFocusDomRef=function(){return this.$("input")};u.prototype.getDomRefForValueStateMessage=function(){return this.getDomRef()};u.prototype.setValue=function(e){e=this.validateProperty("value",e);a.prototype.setValue.call(this,e);return this.setProperty("value",e,true)};u.prototype.sliderValueChanged=function(e){if(this.getDomRef()){this.getFocusDomRef().val(e)}this._fLastValidValue=e;this.setValueState(s.None)};u.prototype.setEditable=function(e){e=this.validateProperty("editable",e);if(this.getDomRef()){this.getFocusDomRef().toggleClass(t.CONSTANTS.TOOLTIP_CLASS+"NotEditable")}return this.setProperty("editable",e,true)};u.prototype.setValueState=function(e){var a,o;e=this.validateProperty("valueState",e);this.setProperty("valueState",e,true);a=e===s.Error;o=this.getDomRef()&&a;this._oValueStateMessage[o?"open":"close"]();this.$().toggleClass(t.CONSTANTS.TOOLTIP_CLASS+"ErrorState",a);return this};u.prototype.onfocusout=function(e){var t=parseFloat(this.getFocusDomRef().val());this._validateValue(t)};u.prototype.onsapenter=function(e){var t=parseFloat(this.getFocusDomRef().val());this._validateValue(t)};u.prototype.onsapescape=function(e){this.sliderValueChanged(this._fLastValidValue);this.setValueState(s.None)};u.prototype._validateValue=function(e){if(this._isValueValid(e)){this.sliderValueChanged(e);this.fireChange({value:e})}else{this.setValueState(s.Error)}};u.prototype._isValueValid=function(e){return!(isNaN(e)||e<this.getMin()||e>this.getMax())};return u});