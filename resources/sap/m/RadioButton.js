/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control","sap/ui/core/EnabledPropagator","sap/ui/core/message/MessageMixin","./RadioButtonGroup","./Label","sap/ui/core/library","sap/base/strings/capitalize","./RadioButtonRenderer"],function(e,t,i,r,a,o,s,n,u){"use strict";var l=s.TextAlign;var p=s.ValueState;var h=s.TextDirection;var d=t.extend("sap.m.RadioButton",{metadata:{interfaces:["sap.ui.core.IFormContent"],library:"sap.m",properties:{enabled:{type:"boolean",group:"Behavior",defaultValue:true},selected:{type:"boolean",group:"Data",defaultValue:false},groupName:{type:"string",group:"Behavior",defaultValue:"sapMRbDefaultGroup"},text:{type:"string",group:"Appearance",defaultValue:null},textDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:h.Inherit},width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:""},useEntireWidth:{type:"boolean",group:"Appearance",defaultValue:false},activeHandling:{type:"boolean",group:"Appearance",defaultValue:true},editable:{type:"boolean",group:"Behavior",defaultValue:true},valueState:{type:"sap.ui.core.ValueState",group:"Data",defaultValue:p.None},textAlign:{type:"sap.ui.core.TextAlign",group:"Appearance",defaultValue:l.Begin},editableParent:{type:"boolean",group:"Behavior",defaultValue:true,visibility:"hidden"},valueStateText:{type:"string",group:"Misc",defaultValue:null,visibility:"hidden"}},events:{select:{parameters:{selected:{type:"boolean"}}}},associations:{ariaDescribedBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaDescribedBy"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}},dnd:{draggable:true,droppable:false},designtime:"sap/m/designtime/RadioButton.designtime"}});i.call(d.prototype);r.call(d.prototype);d.prototype._groupNames={};var c={HOME:"first",END:"last",NEXT:"next",PREV:"prev"};d.prototype.ontap=function(e){if(!this.getEnabled()||!this.getEditable()){return}var t=this.getParent();if(t instanceof a&&(!t.getEnabled()||!t.getEditable())){return}e&&e.setMarked();this.applyFocusInfo();if(!this.getSelected()){this.setSelected(true);var i=this;setTimeout(function(){i.fireSelect({selected:true})},0)}};d.prototype.ontouchstart=function(e){e.originalEvent._sapui_handledByControl=true;if(this.getEnabled()&&this.getActiveHandling()){this.$().toggleClass("sapMRbBTouched",true)}};d.prototype.ontouchend=function(e){this.$().toggleClass("sapMRbBTouched",false)};d.prototype.onsapnext=function(e){this._keyboardHandler(c.NEXT,true);e.setMarked();return this};d.prototype.onsapnextmodifiers=function(e){this._keyboardHandler(c.NEXT,!e.ctrlKey);e.setMarked();return this};d.prototype.onsapprevious=function(e){this._keyboardHandler(c.PREV,true);e.setMarked();return this};d.prototype.onsappreviousmodifiers=function(e){this._keyboardHandler(c.PREV,!e.ctrlKey);e.setMarked();return this};d.prototype.onsaphome=function(e){this._keyboardHandler(c.HOME,true);e.setMarked();return this};d.prototype.onsaphomemodifiers=function(e){this._keyboardHandler(c.HOME,!e.ctrlKey);e.setMarked();return this};d.prototype.onsapend=function(e){this._keyboardHandler(c.END,true);e.setMarked();return this};d.prototype.onsapendmodifiers=function(e){this._keyboardHandler(c.END,!e.ctrlKey);e.setMarked();return this};d.prototype._keyboardHandler=function(e,t){if(this.getParent()instanceof a){return}var i=this._getNextFocusItem(e);i.focus();if(t&&!i.getSelected()&&i.getEditable()&&i.getEnabled()){i.setSelected(true);setTimeout(function(){i.fireSelect({selected:true})},0)}};d.prototype.getAccessibilityInfo=function(){var e=sap.ui.getCore().getLibraryResourceBundle("sap.m");return{role:"radio",type:e.getText("ACC_CTR_TYPE_RADIO"),description:(this.getText()||"")+(this.getSelected()?" "+e.getText("ACC_CTR_STATE_CHECKED"):""),enabled:this.getEnabled(),editable:this.getEditable()}};d.prototype.getFormDoNotAdjustWidth=function(){return this.getText()?false:true};d.prototype._getNextFocusItem=function(e){var t=this._groupNames[this.getGroupName()].filter(function(e){return e.getDomRef()&&e.getEnabled()});var i=t.indexOf(this),r=i,a=t.length;switch(e){case c.NEXT:r=i===a-1?i:i+1;break;case c.PREV:r=i===0?0:r-1;break;case c.HOME:r=0;break;case c.END:r=a-1;break}return t[r]||this};d.prototype.onsapselect=function(e){e.preventDefault();this.ontap(e)};d.prototype.setEnabled=function(e){this.setProperty("enabled",e,false);return this};d.prototype.setSelected=function(e){var t,i=this.getSelected(),r=this.getGroupName(),a=this._groupNames[r],o=a&&a.length;this.setProperty("selected",e,true);this._changeGroupName(this.getGroupName());if(!!e&&r&&r!==""){for(var s=0;s<o;s++){t=a[s];if(t instanceof d&&t!==this&&t.getSelected()){t.fireSelect({selected:false});t.setSelected(false)}}}if(i!==!!e&&this.getDomRef()){this.$().toggleClass("sapMRbSel",e);if(e){this.getDomRef().setAttribute("aria-checked","true");this.getDomRef("RB").checked=true;this.getDomRef("RB").setAttribute("checked","checked")}else{this.getDomRef().removeAttribute("aria-checked");this.getDomRef("RB").checked=false;this.getDomRef("RB").removeAttribute("checked")}}return this};d.prototype.setText=function(e){this.setProperty("text",e,true);if(this._oLabel){this._oLabel.setText(this.getText())}else{this._createLabel("text",this.getText())}this.toggleStyleClass("sapMRbHasLabel",!!e);return this};d.prototype._setWidth=function(e){if(!e){this._setLableWidth()}else{this._setLableWidth("auto")}};d.prototype._setLableWidth=function(e){e=e||this.getWidth();if(this._oLabel){this._oLabel.setWidth(e)}else{this._createLabel("width",e)}};d.prototype.setTextDirection=function(e){this.setProperty("textDirection",e,true);if(this._oLabel){this._oLabel.setTextDirection(this.getTextDirection())}else{this._createLabel("textDirection",this.getTextDirection())}return this};d.prototype.setGroupName=function(e){this._changeGroupName(e,this.getGroupName());return this.setProperty("groupName",e,true)};d.prototype.onBeforeRendering=function(){this._setWidth(this.getUseEntireWidth());return this._changeGroupName(this.getGroupName())};d.prototype.exit=function(){var e=this.getGroupName(),t=this._groupNames[e],i=t&&t.indexOf(this);this._iTabIndex=null;if(this._oLabel){this._oLabel.destroy()}if(i>=-1){t.splice(i,1)}};d.prototype._createLabel=function(e,t){this._oLabel=new o(this.getId()+"-label").addStyleClass("sapMRbBLabel").setParent(this,null,true);this._oLabel.setProperty(e,t,false)};d.prototype.setTabIndex=function(e){var t=this.getFocusDomRef();this._iTabIndex=e;if(t){t.setAttribute("tabindex",e)}return this};d.prototype.setTextAlign=function(e){this.setProperty("textAlign",e,true);if(this._oLabel){this._oLabel.setTextAlign(this.getTextAlign())}else{this._createLabel("textAlign",this.getTextAlign())}return this};d.prototype.setValueStateText=function(e){return this.setProperty("valueStateText",e,true)};d.prototype._changeGroupName=function(e,t){var i=this._groupNames[e],r=this._groupNames[t];if(r&&r.indexOf(this)!==-1){r.splice(r.indexOf(this),1)}if(!i){i=this._groupNames[e]=[]}if(i.indexOf(this)===-1){i.push(this)}};["editableParent"].forEach(function(e){d.prototype["_set"+n(e)]=function(t){return this.setProperty(e,t,true)}});return d});