/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Control","sap/ui/core/library","./DOMAttribute","./DOMElementRenderer","sap/base/Log","sap/ui/thirdparty/jquery"],function(t,e,i,r,a,s){"use strict";var n=t.extend("sap.ui.core.tmpl.DOMElement",{metadata:{library:"sap.ui.core",properties:{text:{type:"string",group:"Appearance",defaultValue:null},tag:{type:"string",group:"Behavior",defaultValue:"span"}},defaultAggregation:"attributes",aggregations:{attributes:{type:"sap.ui.core.tmpl.DOMAttribute",multiple:true,singularName:"attribute"},elements:{type:"sap.ui.core.tmpl.DOMElement",multiple:true,singularName:"element"}}}});n.prototype.applySettings=function(e){var r=this.getMetadata(),n=r.getJSONKeys();if(e){if(!e["attributes"]){var o=e["attributes"]=[];s.each(e,function(t,r){if(t!=="id"&&!n[t]&&typeof r==="string"){o.push(new i({name:t,value:r}));delete e[t]}})}else{a.warning("DOMElement#"+this.getId()+": custom attributes in settings will be ignored since attributes are provided!")}}t.prototype.applySettings.apply(this,arguments)};n.prototype.exit=n.prototype.onBeforeRendering=function(){var t=this.getTag().toLowerCase();if(t==="input"||t==="textarea"||t==="select"){this.$().off("change")}};n.prototype.onAfterRendering=function(){var t=this.getTag().toLowerCase();if(t==="input"||t==="textarea"||t==="select"){this.$().on("change",s.proxy(this.oninputchange,this))}};n.prototype.oninputchange=function(t){var e=this.getTag().toLowerCase();if(e==="input"){var i=this.$().val();this.getAttributes().forEach(function(t){if(t.getName().toLowerCase()==="value"){t.setValue(i)}})}else if(e==="textarea"){var r=this.$().val();this.setText(r)}else if(e==="select"){var r="";this.$().find("select option:selected").each(function(){r+=s(this).text()+" "});this.setText(r)}};n.prototype.attr=function(t,e){var r=this.getAttributes(),a;r.forEach(function(e){var i=e.getName();if(i.toLowerCase()===t){a=e;return false}});if(e===undefined){return a&&a.getValue()}else{if(a){if(e===null){this.removeAttribute(a)}else{a.setValue(e)}}else{if(e!==null){this.addAttribute(new i({name:t,value:e}))}}return this}};n.prototype.removeAttr=function(t){this.attr(t,null);return this};n.prototype.setText=function(t){this.setProperty("text",t,true);var e=this.$();if(e.length>0){var i=this.getTag().toLowerCase();if(i==="textarea"){e.val(this.getProperty("text"))}else{e.text(this.getProperty("text"))}}return this};return n});