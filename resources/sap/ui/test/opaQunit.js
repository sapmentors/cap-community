/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/URI","sap/ui/test/Opa","sap/ui/test/Opa5","sap/ui/thirdparty/jquery"],function(t,e,n,i){"use strict";QUnit.begin(function(n){e._usageReport.begin({uri:(new t).toString(),totalTests:n.totalTests})});QUnit.moduleStart(function(t){e._usageReport.moduleStart(t)});QUnit.testStart(function(){e._usageReport.testStart()});QUnit.testDone(function(t){e._usageReport.testDone(t);var n=t.assertions.some(function(t){return!t.result&&t.message==="Test timed out"});if(n){e._stopQueue({qunitTimeout:QUnit.config.testTimeout/1e3})}});QUnit.moduleDone(function(t){e._usageReport.moduleDone(t)});QUnit.done(function(t){e._usageReport.done(t)});window.opaSkip=a;window.opaTest=o;window.opaTodo=QUnit.todo?s:o;function o(){u("test",arguments,function(t,n){e._usageReport.opaEmpty();f();n()},function(t,n,i){e._usageReport.opaEmpty(i);t.ok(false,i.errorMessage);f();if(!i.qunitTimeout){setTimeout(n,0)}})}function s(){u("todo",arguments,function(t,e){f();e()},function(t,e,n){if(n.qunitTimeout){f()}else{t.ok(false,n.errorMessage);f();setTimeout(e,0)}})}function a(t,e,n,i){c();var o=function(){};if(p()){QUnit.skip(t,o)}else{QUnit.skip(t,e,o,i)}}function u(t,e,n,i){c();var o={testName:e[0],expected:e.length===2?null:e[1],callback:e.length===2?e[1]:e[2],async:e[3]};if(p()&&typeof o.async!=="undefined"){throw new Error("Qunit >=2.0 is used, which no longer supports the 'async' parameter for tests.")}var s=r(o,n,i);var a=[o.testName,s,o.async];if(!p()){a.splice(1,0,o.expected)}QUnit[t].apply(this,a)}function r(t,i,o){return function(s){var a=s.async();e.config.testName=t.testName;e.assert=s;n.assert=s;if(p()&&t.expected!==null){s.expect(t.expected)}t.callback.call(this,e.config.arrangements,e.config.actions,e.config.assertions);e.emptyQueue().done(function(){i(s,a)}).fail(function(t){o(s,a,t)})}}function c(){if(!QUnit.config.testTimeout||QUnit.config.testTimeout===3e4){QUnit.config.testTimeout=9e4}QUnit.config.reorder=false;QUnit.config.scrolltop=false}function f(){e.assert=undefined;n.assert=undefined}function p(){return QUnit.test.length===2}QUnit.config.urlConfig.push({id:"opaExecutionDelay",value:{400:"fast",700:"medium",1e3:"slow"},label:"Opa speed",tooltip:"Each waitFor will be delayed by a number of milliseconds. If it is not set Opa will execute the tests as fast as possible"});n._getEventProvider().attachEvent("onExtensionAfterInit",function(t){var n=t.getParameters();if(n.extension.getAssertions){var o=n.extension.getAssertions();i.each(o,function(t,i){QUnit.assert[t]=function(){var t=this;var o=i.bind(n.appWindow)(arguments).always(function(e){t.push(e.result,e.actual,e.expected,e.message)});e.config.assertions._schedulePromiseOnFlow(o)}})}});return o});