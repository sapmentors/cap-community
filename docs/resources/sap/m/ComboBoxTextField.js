/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./InputBase","./library","sap/ui/core/InvisibleText","sap/ui/core/library","sap/ui/Device","sap/ui/core/LabelEnablement","./ComboBoxTextFieldRenderer"],function(e,t,i,o,r,n,s){"use strict";var a=e.extend("sap.m.ComboBoxTextField",{metadata:{library:"sap.m",properties:{maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"},showButton:{type:"boolean",group:"Appearance",defaultValue:true}},aggregations:{_buttonLabelText:{type:"sap.ui.core.InvisibleText",multiple:false,visibility:"hidden"}}}});var p=sap.ui.getCore().getLibraryResourceBundle("sap.m");a.prototype.init=function(){e.prototype.init.apply(this,arguments);var t=sap.ui.getCore().getLibraryResourceBundle("sap.m");this.addEndIcon({id:this.getId()+"-arrow",src:"sap-icon://slim-arrow-down",noTabStop:true,alt:t.getText("COMBOBOX_BUTTON"),decorative:false})};a.prototype.getIcon=function(){return this.getAggregation("_endIcon")[0]};a.prototype.toggleIconPressedStyle=function(t){this.toggleStyleClass(e.ICON_PRESSED_CSS_CLASS,t)};a.prototype.onBeforeRendering=function(){e.prototype.onBeforeRendering.apply(this,arguments);var t=n.getReferencingLabels(this)||[];t.forEach(function(e){if(this.getIcon().getAriaLabelledBy().indexOf(e)===-1){this.getIcon().addAssociation("ariaLabelledBy",e,true)}},this);if(!this.oInvisibleText&&r.browser.msie){this.oInvisibleText=new i(this.getId()+"-describedby",{text:p.getText("ACC_CTR_TYPE_COMBO")}).toStatic()}};a.prototype.setShowButton=function(e){this.getIcon().setVisible(e);return this.setProperty("showButton",e,true)};a.prototype.getOpenArea=function(){var e=this.getIcon().getDomRef();return e?e.parentNode:e};a.prototype.onsapenter=function(t){e.prototype.onsapenter.apply(this,arguments);if(!this.getEnabled()||!this.getEditable()){return}t.setMarked();var i=this.getValue(),o=i.length;this.setValue(i);this.selectText(o,o)};a.prototype.getValue=function(){var e=this.getFocusDomRef();if(e){return e.value}return this.getProperty("value")};a.prototype.getDomRefForValueStateMessage=function(){return this.getDomRef()};a.prototype.getAccessibilityInfo=function(){var t=e.prototype.getAccessibilityInfo.apply(this,arguments);t.type=sap.ui.getCore().getLibraryResourceBundle("sap.m").getText("ACC_CTR_TYPE_COMBO");return t};a.prototype.exit=function(){e.prototype.exit.apply(this,arguments);if(this.oInvisibleText){this.oInvisibleText.destroy();this.oInvisibleText=null}};return a});