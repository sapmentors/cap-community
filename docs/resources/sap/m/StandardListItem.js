/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/library","sap/ui/core/IconPool","sap/ui/Device","./library","./ListItemBase","./Image","./StandardListItemRenderer"],function(t,e,i,o,n,s,a){"use strict";var r=t.TextDirection;var p=t.ValueState;var l=n.extend("sap.m.StandardListItem",{metadata:{library:"sap.m",properties:{title:{type:"string",group:"Misc",defaultValue:null},description:{type:"string",group:"Misc",defaultValue:null},icon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},iconInset:{type:"boolean",group:"Appearance",defaultValue:true},iconDensityAware:{type:"boolean",group:"Misc",defaultValue:true},activeIcon:{type:"sap.ui.core.URI",group:"Misc",defaultValue:null},info:{type:"string",group:"Misc",defaultValue:null},infoState:{type:"sap.ui.core.ValueState",group:"Misc",defaultValue:p.None},adaptTitleSize:{type:"boolean",group:"Appearance",defaultValue:true},titleTextDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:r.Inherit},infoTextDirection:{type:"sap.ui.core.TextDirection",group:"Appearance",defaultValue:r.Inherit},wrapping:{type:"boolean",group:"Behavior",defaultValue:false}},designtime:"sap/m/designtime/StandardListItem.designtime"}});l.prototype.exit=function(){if(this._oImage){this._oImage.destroy("KeepDom")}n.prototype.exit.apply(this,arguments)};l.prototype.setIcon=function(t){var i=this.getIcon();this.setProperty("icon",t);if(this._oImage&&(!t||e.isIconURI(t)!=e.isIconURI(i))){this._oImage.destroy("KeepDom");this._oImage=undefined}return this};l.prototype._getImage=function(){var t=this._oImage;if(t){t.setSrc(this.getIcon());if(t.setDensityAware){t.setDensityAware(this.getIconDensityAware())}}else{t=e.createControlByURI({id:this.getId()+"-img",src:this.getIcon(),densityAware:this.getIconDensityAware(),useIconTooltip:false},s).setParent(this,null,true)}var i=this.getIconInset()?"sapMSLIImg":"sapMSLIImgNoInset";t.addStyleClass(t instanceof s?i:i+"Icon",true);this._oImage=t;return this._oImage};l.prototype._activeHandlingInheritor=function(){if(this._oImage){var t=this.getActiveIcon();t&&this._oImage.setSrc(t)}};l.prototype._inactiveHandlingInheritor=function(){if(this._oImage){this._oImage.setSrc(this.getIcon())}};l.prototype.getContentAnnouncement=function(t){var e="",i=this.getInfoState(),o,n="",s,a="",r,p;if(this.getWrapping()){r=this.getDomRef("titleButton");p=this.getDomRef("descriptionButton");o=this._bTitleTextExpanded?this.getTitle():this._getCollapsedText(this.getTitle());s=this._bDescriptionTextExpanded?this.getDescription():this._getCollapsedText(this.getDescription());if(r){n=r.textContent+" "+t.getText("ACC_CTR_TYPE_BUTTON")}if(p){a=p.textContent+" "+t.getText("ACC_CTR_TYPE_BUTTON")}e+=o+" "+n+" "+s+" "+a+" "}else{e+=this.getTitle()+" "+this.getDescription()+" "}e+=this.getInfo()+" ";if(i!="None"&&i!=this.getHighlight()){e+=t.getText("LIST_ITEM_STATE_"+i.toUpperCase())}return e};l.prototype.showCompleteInfoText=function(){return this.getInfo().length<=15};l.prototype.ontap=function(t){this._checkExpandCollapse(t);if(!t.isMarked()){return n.prototype.ontap.apply(this,arguments)}};l.prototype.onsapspace=function(t){this._checkExpandCollapse(t,true);if(!t.isMarked()){return n.prototype.onsapspace.apply(this,arguments)}};l.prototype._checkExpandCollapse=function(t,e){var i=t.target,o=i&&i.id;if(o&&o===this.getId()+"-titleButton"){if(e){t.preventDefault()}t.setMarked();return this._toggleExpandCollapse("title",this._bTitleTextExpanded)}if(o&&o===this.getId()+"-descriptionButton"){if(e){t.preventDefault()}t.setMarked();return this._toggleExpandCollapse("description",this._bDescriptionTextExpanded)}};l.prototype._toggleExpandCollapse=function(t,e){var i=this.getDomRef(t+"Text"),o=this.getDomRef(t+"ThreeDots"),n=this.getDomRef(t+"Button"),s=t==="title"?this.getTitle():this.getDescription(),a=sap.ui.getCore().getLibraryResourceBundle("sap.m");if(!e){i.textContent=s;o.textContent=" ";n.textContent=a.getText("TEXT_SHOW_LESS");e=true}else{i.textContent=this._getCollapsedText(s);o.textContent=" ... ";n.textContent=a.getText("TEXT_SHOW_MORE");e=false}if(t==="title"){this._bTitleTextExpanded=e}else{this._bDescriptionTextExpanded=e}};l.prototype._getCollapsedText=function(t){var e=i.system.phone?100:300;return t.substr(0,e)};return l});