/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["./library","sap/ui/core/Control"],function(e,t){"use strict";var i=t.extend("sap.m.SuggestionsList",{metadata:{library:"sap.m",properties:{width:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"auto"},maxWidth:{type:"sap.ui.core.CSSSize",group:"Dimension",defaultValue:"100%"}},associations:{parentInput:{type:"sap.ui.core.Control",multiple:false,singularName:"parentInput"},ariaLabelledBy:{type:"sap.ui.core.Control",multiple:true,singularName:"ariaLabelledBy"}}},renderer:{render:function(e,t){e.write("<ul");e.writeControlData(t);e.addClass("sapMSuL");e.addClass("sapMSelectList");e.writeClasses();e.writeAccessibilityState({role:"listbox",multiselectable:"false"});e.addStyle("width",t.getWidth());e.addStyle("max-width",t.getMaxWidth());e.writeStyles();e.write(">");this.renderItems(e,t);e.write("</ul>")},renderItems:function(e,t){var i;var r=t.getSelectedItemIndex();try{i=sap.ui.getCore().byId(t.getParentInput()).getValue()}catch(e){i=""}t.getItems().forEach(function(t,a){t.render(e,t,i,a===r)})}}});i.prototype.init=function(){this._iSelectedItem=-1};i.prototype.onBeforeRendering=function(){this.$().off()};i.prototype.onAfterRendering=function(){this.$().on("mousedown",function(e){e.preventDefault()})};i.prototype.getItems=function(){try{return sap.ui.getCore().byId(this.getParentInput()).getSuggestionItems()}catch(e){return[]}};i.prototype.update=function(){var e;var t=this.getDomRef();if(t){e=sap.ui.getCore().createRenderManager();this.getRenderer().renderItems(e,this);e.flush(t);e.destroy()}return this};i.prototype.selectByIndex=function(e,t){var i=this.getItems();var r;var a;var s;var n=sap.ui.getCore().byId(this.getParentInput());var o="aria-activedecendant";if(isNaN(parseInt(e))){e=-1;t=false}if(!i.length||t&&e===0||!t&&e<0){r=-1}else{if(t){if(this._iSelectedItem<0){r=(e<0?i.length:-1)+e}else{r=this._iSelectedItem+e}}else{r=e}r=Math.min(Math.max(r,0),i.length-1)}this._iSelectedItem=r;if(i.length){this.$().children("li").removeClass("sapMSelectListItemBaseSelected").attr("aria-selected","false").eq(r).addClass("sapMSelectListItemBaseSelected").attr("aria-selected","true")}if(n){if(r>=0){a=n.getSuggestionItems()[r];if(a){s=a.getId();this._scrollToItem(a)}}if(s){n.$("I").attr(o,s)}else{n.$("I").removeAttr(o)}}return this._iSelectedItem};i.prototype._scrollToItem=function(e){var t=this.getParent().$().find(".sapMPopoverCont")[0],i,r,a,s;if(!e||!e.getDomRef()||!t){return}r=e.getDomRef().getBoundingClientRect();i=t.getBoundingClientRect();a=i.top-r.top;s=r.bottom-i.bottom;if(a>0){t.scrollTop=Math.max(t.scrollTop-a,0)}else if(s>0){t.scrollTop=t.scrollTop+s}};i.prototype.getSelectedItemIndex=function(){return this._iSelectedItem};return i});