/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/core/Core","sap/ui/layout/cssgrid/GridLayoutBase","sap/ui/layout/cssgrid/GridSettings","sap/ui/layout/cssgrid/VirtualGrid","sap/ui/Device","sap/ui/layout/library"],function(t,e,i,o,s){"use strict";var a=16;var u=8;var r=t.getConfiguration().getRTL();var l={Phone:"sapUiLayoutCSSResponsiveColumnLayoutS",Tablet:"sapUiLayoutCSSResponsiveColumnLayoutM",Desktop:"sapUiLayoutCSSResponsiveColumnLayoutL",LargeDesktop:"sapUiLayoutCSSResponsiveColumnLayoutXL"};var n={Phone:4,Tablet:8,Desktop:12,LargeDesktop:16};function p(t){var e=t.getLayoutData();return e&&e.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData")?e.getColumns():1}function y(t){var e=t.getLayoutData();return e&&e.isA("sap.ui.layout.cssgrid.ResponsiveColumnItemLayoutData")?e.getRows():1}var f=e.extend("sap.ui.layout.cssgrid.ResponsiveColumnLayout",{metadata:{library:"sap.ui.layout",properties:{},events:{layoutChange:{parameters:{layout:{type:"string"}}}}}});f.prototype.isResponsive=function(){return true};f.prototype.onGridAfterRendering=function(t){this._applyLayout(t,false)};f.prototype.getActiveGridSettings=function(){return null};f.prototype.onGridResize=function(t){if(!t||t.size.width===0){return}this._applyLayout(t.control,true)};f.prototype.renderSingleGridLayout=function(t){if(this.isGridSupportedByBrowser()){t.addClass("sapUiLayoutCSSResponsiveColumnLayout")}else{t.addClass("sapUiLayoutCSSResponsiveColumnLayoutPolyfill")}};f.prototype._applyLayout=function(t,e){var i=t.isA("sap.f.GridList")?"listUl":"",o=this._sCurrentLayoutClassName,a=t.$().parent(),u=t.$(i),r=a.outerWidth(),n=s.media.getCurrentRange("StdExt",r),p=l[n.name],y=this.isGridSupportedByBrowser();if(!y){this._scheduleIEPolyfill(t,u,n)}if(o===p){return}this._sCurrentLayoutClassName=p;if(y){u.removeClass(o);u.addClass(p)}if(e){this.fireLayoutChange({layout:n.name})}};f.prototype._scheduleIEPolyfill=function(t,e,i){if(this._iPolyfillCallId){clearTimeout(this._iPolyfillCallId)}this._iPolyfillCallId=setTimeout(function(){this._applyIEPolyfillLayout(t,e,i)}.bind(this),0)};f.prototype._applyIEPolyfillLayout=function(t,e,i){if(t.bIsDestroyed){return}var s=n[i.name],l=e.innerWidth(),f=t.getItems(),d=i.name==="Phone"?u:a,h=Math.floor((l-d*(s-1))/s),g,C,L,c,m,v,S;for(S=0;S<f.length;S++){L=f[S];c=L.$();g=p(L);c.css({position:"absolute",height:"auto",width:h*g+d*(g-1)})}var R=new o;R.init({numberOfCols:s,cellWidth:h,unitOfMeasure:"px",gapSize:d,topOffset:0,leftOffset:0,allowDenseFill:false,rtl:r,width:l,rowsAutoHeight:true});for(S=0;S<f.length;S++){L=f[S];if(!L.getVisible()){continue}c=L.$();g=p(L);C=y(L);R.fitElement(S+"",g,C,c.outerHeight(true))}R.calculatePositions();m=R.getItems();for(S=0;S<f.length;S++){L=f[S];c=L.$();v=m[S];c.css({position:"absolute",top:v.top,left:v.left,height:v.height})}e.height(R.getHeight())};return f});