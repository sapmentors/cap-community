/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/base/util/ObjectPath","sap/ui/Device","sap/base/assert","sap/base/Log","sap/base/util/array/uniqueSort"],function(t,e,a,s,r){"use strict";var n=function(e,s){a(typeof e==="string"&&e,"Metadata: sClassName must be a non-empty string");a(typeof s==="object","Metadata: oClassInfo must be empty or an object");if(!s||typeof s.metadata!=="object"){s={metadata:s||{},constructor:t.get(e)};s.metadata.__version=1}s.metadata.__version=s.metadata.__version||2;if(typeof s.constructor!=="function"){throw Error("constructor for class "+e+" must have been declared before creating metadata for it")}this._sClassName=e;this._oClass=s.constructor;this.extend(s)};n.prototype.extend=function(t){this.applySettings(t);this.afterApplySettings()};n.prototype.applySettings=function(e){var r=this,o=e.metadata,i;if(o.baseType){var p=t.get(o.baseType);if(typeof p!=="function"){s.fatal("base class '"+o.baseType+"' does not exist")}if(p.getMetadata){this._oParent=p.getMetadata();a(p===p.getMetadata().getClass(),"Metadata: oParentClass must match the class in the parent metadata")}else{this._oParent=new n(o.baseType,{})}}else{this._oParent=undefined}this._bAbstract=!!o["abstract"];this._bFinal=!!o["final"];this._sStereotype=o.stereotype||(this._oParent?this._oParent._sStereotype:"object");this._bDeprecated=!!o["deprecated"];this._aInterfaces=o.interfaces||[];this._aPublicMethods=o.publicMethods||[];this._bInterfacesUnique=false;i=this._oClass.prototype;for(var c in e){if(c!=="metadata"&&c!=="constructor"){i[c]=e[c];if(!c.match(/^_|^on|^init$|^exit$/)){r._aPublicMethods.push(c)}}}};n.prototype.afterApplySettings=function(){if(this._oParent){this._aAllPublicMethods=this._oParent._aAllPublicMethods.concat(this._aPublicMethods);this._bInterfacesUnique=false}else{this._aAllPublicMethods=this._aPublicMethods}};n.prototype.getStereotype=function(){return this._sStereotype};n.prototype.getName=function(){return this._sClassName};n.prototype.getClass=function(){return this._oClass};n.prototype.getParent=function(){return this._oParent};n.prototype._dedupInterfaces=function(){if(!this._bInterfacesUnique){r(this._aInterfaces);r(this._aPublicMethods);r(this._aAllPublicMethods);this._bInterfacesUnique=true}};n.prototype.getPublicMethods=function(){this._dedupInterfaces();return this._aPublicMethods};n.prototype.getAllPublicMethods=function(){this._dedupInterfaces();return this._aAllPublicMethods};n.prototype.getInterfaces=function(){this._dedupInterfaces();return this._aInterfaces};n.prototype.isInstanceOf=function(t){if(this._oParent){if(this._oParent.isInstanceOf(t)){return true}}var e=this._aInterfaces;for(var a=0,s=e.length;a<s;a++){if(e[a]===t){return true}}return false};var o=!!e.browser.phantomJS;Object.defineProperty(n.prototype,"_mImplementedTypes",{get:function(){if(this===n.prototype){throw new Error("sap.ui.base.Metadata: The '_mImplementedTypes' property must not be accessed on the prototype")}var t=Object.create(this._oParent?this._oParent._mImplementedTypes:null);t[this._sClassName]=true;var e=this._aInterfaces,a=e.length;while(a-- >0){if(!t[e[a]]){t[e[a]]=true}}Object.defineProperty(this,"_mImplementedTypes",{value:Object.freeze(t),writable:o,configurable:false});return t},configurable:true});n.prototype.isA=function(t){var e=this._mImplementedTypes;if(Array.isArray(t)){for(var a=0;a<t.length;a++){if(t[a]in e){return true}}return false}return t in e};n.prototype.isAbstract=function(){return this._bAbstract};n.prototype.isFinal=function(){return this._bFinal};n.prototype.isDeprecated=function(){return this._bDeprecated};n.prototype.addPublicMethods=function(t){var e=t instanceof Array?t:arguments;Array.prototype.push.apply(this._aPublicMethods,e);Array.prototype.push.apply(this._aAllPublicMethods,e);this._bInterfacesUnique=false};n.createClass=function(e,r,o,i){if(typeof e==="string"){i=o;o=r;r=e;e=null}a(!e||typeof e==="function");a(typeof r==="string"&&!!r);a(!o||typeof o==="object");a(!i||typeof i==="function");i=i||n;if(typeof i.preprocessClassInfo==="function"){o=i.preprocessClassInfo(o)}o=o||{};o.metadata=o.metadata||{};if(!o.hasOwnProperty("constructor")){o.constructor=undefined}var p=o.constructor;a(!p||typeof p==="function");if(e){if(!p){if(o.metadata.deprecated){p=function(){s.warning("Usage of deprecated class: "+r);e.apply(this,arguments)}}else{p=function(){e.apply(this,arguments)}}}p.prototype=Object.create(e.prototype);p.prototype.constructor=p;o.metadata.baseType=e.getMetadata().getName()}else{p=p||function(){};delete o.metadata.baseType}o.constructor=p;t.set(r,p);var c=new i(r,o);p.getMetadata=p.prototype.getMetadata=function(){return c};if(!p.getMetadata().isFinal()){p.extend=function(t,e,a){return n.createClass(p,t,e,a||i)}}return p};return n},true);