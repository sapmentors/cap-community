/*!
 * OpenUI5
 * (c) Copyright 2009-2019 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(["sap/ui/thirdparty/jquery","sap/ui/dom/jquery/Selectors"],function(e){"use strict";var a={};a.fastNavigationKey="sap-ui-fastnavgroup";a.handleF6GroupNavigation=function(t,r){function n(a){var t=e(a).closest('[data-sap-ui-customfastnavgroup="true"]');return t[0]}function i(t){var r=n(t);if(r){return r}var i=e(t).closest("[data-"+a.fastNavigationKey+'="true"]');return i[0]}function s(a,t,r){var n=e(a),i,s;if(r){i=e.merge(n.find("*"),e.merge(n.nextAll(),n.parents().nextAll()));s=i.find(":sapTabbable").addBack(":sapTabbable")}else{i=e.merge(n.prevAll(),n.parents().prevAll());s=e.merge(n.parents(":sapTabbable"),i.find(":sapTabbable").addBack(":sapTabbable"))}var s=e.unique(s);return s.filter(function(){return f(t,this)})}function u(a,t){var r=window.document.getElementById("sap-ui-static");if(!r){return a}var n=[];for(var i=0;i<t.length;i++){if(e.contains(r,t[i])){n.push(t[i])}}return a.filter(function(){if(n.length&&f(n,this)){return true}return!e.contains(r,this)})}function f(a,t){for(var r=0;r<a.length;r++){if(a[r]===t||e.contains(a[r],t)){return true}}return false}function l(a,t,r,n){var s,u;for(var f=t.length-1;f>=0;f--){s=i(t[f]);if(s!=r){if(n){r=s;n=false}else{u=e(t[f+1]);break}}}if(!u&&!n){u=a}return u}function o(a,t,r){if(!t||t.length==0){t=[document]}if(!f(t,a)){return}var o=i(a),d=u(e(t).find(":sapTabbable").addBack(":sapTabbable"),t),p=d.first(),c=u(s(a,t,r),t),v,g;if(r){for(var b=0;b<c.length;b++){v=i(c[b]);if(v!=o){g=e(c[b]);break}}if(!g||!g.length){g=p}}else{g=l(p,c,o,true);if(!g||!g.length){if(d.length==1){g=e(d[0])}else if(d.length>1){o=i(d.eq(-1));v=i(d.eq(-2));if(o!=v){g=d.eq(-1)}else{g=l(p,d,o,false)}}}}if(g&&g.length){var h=g[0],y=null,k=n(h);if(k&&k.id){var m=sap.ui.getCore().byId(k.id);if(m){y=e.Event("BeforeFastNavigationFocus");y.target=h;y.source=a;y.forward=r;m._handleEvent(y)}}if(!y||!y.isDefaultPrevented()){h.focus()}}}if(t.type!="keydown"||t.key!="F6"||t.isMarked("sapui5_handledF6GroupNavigation")||t.isMarked()||t.isDefaultPrevented()){return}t.setMark("sapui5_handledF6GroupNavigation");t.setMarked();t.preventDefault();if(r&&r.skip){return}var d=r&&r.target?r.target:document.activeElement,p=null;if(r&&r.scope){p=Array.isArray(r.scope)?r.scope:[r.scope]}o(d,p,!t.shiftKey)};return a});